System.register("chunks:///_virtual/particle.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./shape-manager.ts"],(function(t){"use strict";var i,e,s,o,n,h,r,a,c;return{setters:[function(t){i=t.inheritsLoose,e=t.defineProperty,s=t.assertThisInitialized},function(t){o=t.cclegacy,n=t._decorator,h=t.Vec3,r=t.Vec2,a=t.Component},function(t){c=t.default}],execute:function(){var p;t("PARTICLE_MOVE_TYPE",void 0),o._RF.push({},"07246oXfktPBLBZV+aNPUEP","particle",void 0);var v,M=n.ccclass;n.property;!function(t){t[t.NONE=0]="NONE",t[t.MOVE_LEFT=1]="MOVE_LEFT",t[t.MOVE_RIGHT=2]="MOVE_RIGHT",t[t.MOVE_DOWN=3]="MOVE_DOWN"}(v||(v=t("PARTICLE_MOVE_TYPE",{})));t("default",M("Particle")(p=function(t){function o(){for(var i,o=arguments.length,n=new Array(o),h=0;h<o;h++)n[h]=arguments[h];return i=t.call.apply(t,[this].concat(n))||this,e(s(i),"partInfo",null),e(s(i),"targetMoveX",0),e(s(i),"minMoveX",30),e(s(i),"maxMoveX",40),e(s(i),"currentMoveType",v.NONE),e(s(i),"isFinishMoving",!1),e(s(i),"enableFastMoveDown",!1),e(s(i),"spriteHalfSize",new cc.Size(0,0)),i}i(o,t);var n=o.prototype;return n.start=function(){},n.update=function(t){if(0==this.isFinishMoving){var i=new h(0,-1*this.partInfo.fallSpeed,0);this.enableFastMoveDown&&(i.y=-1*this.partInfo.moveSpeed),this.currentMoveType==v.MOVE_LEFT?(i.x=-1*this.partInfo.moveSpeed,i.x+this.node.position.x<=this.targetMoveX&&(i.x=this.targetMoveX-this.node.position.x,this.currentMoveType=v.NONE)):this.currentMoveType==v.MOVE_RIGHT&&(i.x=1*this.partInfo.moveSpeed,i.x+this.node.position.x>=this.targetMoveX&&(i.x=this.targetMoveX-this.node.position.x,this.currentMoveType=v.NONE)),i.add(this.node.position),this.node.setPosition(i),this.CheckFinishMove()}},n.CheckFinishMove=function(){var t=this.node.position,i=c.instance.GetLimitedLinePosy(),e=this.GetNearestTarget(0);if(t.y<=i-this.spriteHalfSize.height&&(t.y=i-this.spriteHalfSize.height,this.isFinishMoving=!0,this.CheckMacthParticle()),0==c.instance.IsFirstPart()){var s=c.instance.GetDeltaPartPosX();(t.x-s-this.spriteHalfSize.width==e.x||t.x-s+this.spriteHalfSize.width==e.x)&&t.y+this.spriteHalfSize.height<=this.partInfo.endPoint.y&&(t.y=this.partInfo.endPoint.y-this.spriteHalfSize.height,this.isFinishMoving=!0,this.CheckMacthParticle())}},n.MoveParticle=function(t){if(t==v.MOVE_DOWN)return this.enableFastMoveDown=!0,void console.log("move down");if(this.currentMoveType==v.NONE){var i=this.GetNearestTarget(9999),e=Math.abs(i.x-this.node.position.x);t==v.MOVE_LEFT?(console.log("move left"),(this.node.position.x<=i.x||e>this.maxMoveX)&&(e=this.minMoveX),this.targetMoveX=this.node.position.x-e-this.spriteHalfSize.width):t==v.MOVE_RIGHT&&(console.log("move right"),(this.node.position.x>=i.x||e>this.maxMoveX)&&(e=this.minMoveX),this.targetMoveX=this.node.position.x+e-this.spriteHalfSize.width),this.currentMoveType=t}},n.DeleteShape=function(){this.destroy()},n.InitParticle=function(t,i,e,s){this.partInfo=t,this.isFinishMoving=!1,this.currentMoveType=v.NONE,this.enableFastMoveDown=!1,this.minMoveX=i,this.maxMoveX=e,this.spriteHalfSize.width=s.width/2,this.spriteHalfSize.height=s.height/2},n.IsFinishMove=function(){return this.isFinishMoving},n.CheckMacthParticle=function(){0==c.instance.IsFirstPart()&&c.instance.CheckMatchedParticle(this.partInfo.spriteName)},n.GetNearestTarget=function(t){var i=0,e=c.instance.GetDeltaPartPosX(),s=c.instance.GetReadyJointPos();if(0==s.length)return new r(-9999,c.instance.GetLimitedLinePosy());var o=s[i].x+e,n=Math.sqrt((this.node.position.x-o)*(this.node.position.x-o)+(this.node.position.y-s[i].y)*(this.node.position.y-s[i].y));0==n&&(n=t);for(var h=1;h<s.length;h++){o=s[h].x+e;var a=Math.sqrt((this.node.position.x-o)*(this.node.position.x-o)+(this.node.position.y-s[h].y)*(this.node.position.y-s[h].y));0==a&&(a=t),n>a&&(n=a,i=h)}return new r(s[i].x,s[i].y)},o}(a))||p);o._RF.pop()}}}));

System.register("chunks:///_virtual/dl-exportleveljs.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./shape-level.ts","./dl-particle-edit.ts"],(function(e){"use strict";var i,t,n,o,l,s,a,r,u,p,c,f;return{setters:[function(e){i=e.defineProperty,t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,l=e.assertThisInitialized,s=e.createClass},function(e){a=e.cclegacy,r=e._decorator,u=e.Node,p=e.Component},function(e){c=e.default},function(e){f=e.default}],execute:function(){var d,v,m,h,y,x,g,L,D,U,M,N,b;a._RF.push({},"129842hOQtCiLP6q8YCc2vp","dl-exportleveljs",void 0);var C=r.ccclass,E=r.property;e("default",(d=C("DlExportleveljs"),v=E(u),m=E(u),h=E(u),y=E(u),d((b=N=function(e){function t(){for(var t,n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return t=e.call.apply(e,[this].concat(s))||this,o(l(t),"inputtime",L,l(t)),o(l(t),"inputminmovex",D,l(t)),o(l(t),"inputmaxmovex",U,l(t)),o(l(t),"inputlinelimited",M,l(t)),i(l(t),"levelinfo",void 0),i(l(t),"editBox",void 0),i(l(t),"isNeedUpdateDisplay",!1),t}n(t,e);var a=t.prototype;return a.onLoad=function(){t._instance=this.node.getComponent("DlExportleveljs"),this.levelinfo=c.instance.GetLevelInfos(0)},a.start=function(){this.editBox=this.node.getComponentInChildren("cc.EditBox"),this.isNeedUpdateDisplay=!0,f.instance.ShowParticleInfo(this.levelinfo.partInfo),this.inputtime.getComponent("cc.EditBox").string=""+this.levelinfo.timeLimited,this.inputmaxmovex.getComponent("cc.EditBox").string=""+this.levelinfo.maxMoveX,this.inputminmovex.getComponent("cc.EditBox").string=""+this.levelinfo.minMoveX,this.inputlinelimited.getComponent("cc.EditBox").string=""+this.levelinfo.limitedLinePosY},a.update=function(e){this.isNeedUpdateDisplay&&this.DisplayLevelInfo()},a.GetDefaultTime=function(){return this.levelinfo.timeLimited},a.GetDefaultMinMove=function(){return this.levelinfo.minMoveX},a.GetDefaultMaxMove=function(){return this.levelinfo.maxMoveX},a.GetDefaultLineLimited=function(){return this.levelinfo.limitedLinePosY},a.SetLevelName=function(e){this.levelinfo.levelName=e,this.levelinfo.partInfo=[],this.isNeedUpdateDisplay=!0},a.UpdateTime=function(e){this.levelinfo.timeLimited=e,this.isNeedUpdateDisplay=!0},a.UpdateMinMove=function(e){this.levelinfo.minMoveX=e,this.isNeedUpdateDisplay=!0},a.UpdateMaxMove=function(e){this.levelinfo.maxMoveX=e,this.isNeedUpdateDisplay=!0},a.UpdateLineLimited=function(e){this.levelinfo.limitedLinePosY=e,this.isNeedUpdateDisplay=!0},a.UpdatePartInfo=function(e){this.levelinfo.partInfo=e,this.isNeedUpdateDisplay=!0},a.PlayLevel=function(){cc.director.loadScene("shapethecurves")},a.SaveLevel=function(){cc.sys.localStorage.setItem("SHAPETHECURVES_CURRENT_LEVEL",JSON.stringify(this.levelinfo))},a.DisplayLevelInfo=function(){var e=JSON.stringify(this.levelinfo);this.editBox.string=e},s(t,null,[{key:"instance",get:function(){return t._instance}}]),t}(p),i(N,"_instance",null),L=t((g=b).prototype,"inputtime",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(g.prototype,"inputminmovex",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(g.prototype,"inputmaxmovex",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(g.prototype,"inputlinelimited",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=g))||x));a._RF.pop()}}}));

System.register("chunks:///_virtual/dl-particle-edit.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./shape-level.ts","./dl-exportleveljs.ts"],(function(t){"use strict";var e,n,i,r,o,a,l,s,c,d,u,h,p,f;return{setters:[function(t){e=t.defineProperty,n=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,o=t.assertThisInitialized,a=t.createClass},function(t){l=t.cclegacy,s=t._decorator,c=t.Node,d=t.Vec3,u=t.Component},function(t){h=t.PartInfo,p=t.PartPoint},function(t){f=t.default}],execute:function(){var P,m,v,I,g,N,b,y,S,C,w,x,J,z,D,B,E,U,_,L,k,G,M;l._RF.push({},"47fd5plblZAfa2WmLI9ll4M","dl-particle-edit",void 0);var V=s.ccclass,A=s.property;t("default",(P=V("DlParticleEdit"),m=A({type:cc.Prefab}),v=A(c),I=A({type:cc.Prefab}),g=A(c),N=A(c),b=A(c),y=A(c),S=A(c),C=A(c),P((M=G=function(t){function n(){for(var n,i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];return n=t.call.apply(t,[this].concat(a))||this,r(o(n),"prefabbuttonlevel",J,o(n)),r(o(n),"inputNode",z,o(n)),r(o(n),"prefabParticleNode",D,o(n)),r(o(n),"inputScaleNode",B,o(n)),r(o(n),"inputfallSpeedNode",E,o(n)),r(o(n),"inputmoveSpeedNode",U,o(n)),r(o(n),"inputPosxNode",_,o(n)),r(o(n),"inputPosyNode",L,o(n)),r(o(n),"nodeJoint",k,o(n)),e(o(n),"listPart",[]),e(o(n),"selectedPartName",""),e(o(n),"currentPartInfo",[]),n}i(n,t);var l=n.prototype;return l.onLoad=function(){n._instance=this.node.getComponent("DlParticleEdit")},l.start=function(){this.inputNode&&""==this.selectedPartName&&(this.inputNode.active=!1)},l.AddParticle=function(t){this.selectedPartName=t;var e=cc.instantiate(this.prefabbuttonlevel);e.getComponent("ButtonLevel").InitButton(t,"DlParticleEdit"),e.name=t,this.node.addChild(e);var n=new h;n.startPoint=new p,n.startPoint.x=0,n.startPoint.y=300,n.endPoint=new p,n.endPoint.x=0,n.endPoint.y=0,n.spriteName=t,n.scale=1.5,n.fallSpeed=2,n.moveSpeed=10,this.currentPartInfo.push(n),f.instance.UpdatePartInfo(this.currentPartInfo)},l.ShowParticleInfo=function(t){for(var e=0;e<t.length;e++){var n=t[e].spriteName,i=cc.instantiate(this.prefabbuttonlevel);i.getComponent("ButtonLevel").InitButton(n,"DlParticleEdit"),i.name=n,this.node.addChild(i)}this.currentPartInfo=t},l.GetCurrentPartinfo=function(){for(var t=null,e=0;e<this.currentPartInfo.length&&(t=this.currentPartInfo[e]).spriteName!=this.selectedPartName;e++);return t},l.UpdateCurrentPartinfo=function(t){for(var e=0;e<this.currentPartInfo.length;e++)t.spriteName==this.currentPartInfo[e].spriteName&&(this.currentPartInfo[e].scale=t.scale,this.currentPartInfo[e].endPoint.x=t.endPoint.x,this.currentPartInfo[e].endPoint.y=t.endPoint.y,this.currentPartInfo[e].fallSpeed=t.fallSpeed,this.currentPartInfo[e].moveSpeed=t.moveSpeed);this.nodeJoint.getComponent("DlJoints").UpdateJointInfo(t.partJoints),f.instance.UpdatePartInfo(this.currentPartInfo)},l.UpdateJointInfo=function(t){for(var e=0;e<this.currentPartInfo.length;e++)this.selectedPartName==this.currentPartInfo[e].spriteName&&(this.currentPartInfo[e].partJoints=t);f.instance.UpdatePartInfo(this.currentPartInfo)},l.UpdateSelect=function(t){this.selectedPartName=t,console.log("DlParticleEdit update button: "+t);for(var e=1;e<this.node.children.length;e++){var n=this.node.children[e];n.name!=t&&n.getComponent("ButtonLevel").SetSelectedButton(!1)}this.inputNode.active=!0,this.UpdateDisplayCurrentPartinfo(),this.nodeJoint.getComponent("DlJoints").ShowJointInfo()},l.UpdateDisplayCurrentPartinfo=function(){var t=this.GetCurrentPartinfo();this.inputPosxNode.getComponent("cc.EditBox").string=""+t.endPoint.x,this.inputPosyNode.getComponent("cc.EditBox").string=""+t.endPoint.y,this.inputScaleNode.getComponent("cc.EditBox").string=""+t.scale,this.inputfallSpeedNode.getComponent("cc.EditBox").string=""+t.fallSpeed,this.inputmoveSpeedNode.getComponent("cc.EditBox").string=""+t.moveSpeed},l.MoveCurrentUp=function(){for(var t=1;t<this.node.children.length;t++){var e=this.node.children[t];if(e.name==this.selectedPartName&&t>1){var n=new d(e.position.x,e.position.y,e.position.z);e.setPosition(new d(this.node.children[t-1].position.x,this.node.children[t-1].position.y,this.node.children[t-1].position.z)),this.node.children[t-1].position=n;var i=this.node.children[t-1];this.node.children[t-1]=this.node.children[t],this.node.children[t]=i;break}}for(t=0;t<this.currentPartInfo.length;t++)this.currentPartInfo[t].spriteName==this.selectedPartName&&t>0&&this.SwapPartInfo(t)},l.MoveCurrentDown=function(){for(var t=1;t<this.node.children.length;t++){var e=this.node.children[t];if(e.name==this.selectedPartName&&t+1<this.node.children.length){var n=new d(e.position.x,e.position.y,e.position.z);e.setPosition(new d(this.node.children[t+1].position.x,this.node.children[t+1].position.y,this.node.children[t+1].position.z)),this.node.children[t+1].setPosition(n);var i=this.node.children[t+1];this.node.children[t+1]=this.node.children[t],this.node.children[t]=i;break}}for(t=0;t<this.currentPartInfo.length;t++)this.currentPartInfo[t].spriteName==this.selectedPartName&&t+1<this.currentPartInfo.length&&this.SwapPartInfo(t+1)},l.SwapPartInfo=function(t){var e=this.currentPartInfo[t].Clone();this.currentPartInfo[t].SetValue(this.currentPartInfo[t-1]),this.currentPartInfo[t-1].SetValue(e)},l.RemoveCurrent=function(){for(var t=1,e=this.selectedPartName;t<this.node.children.length;t++){var n=this.node.children[t];if(n.name==this.selectedPartName){this.selectedPartName="",this.nodeJoint.getComponent("DlJoints").HideInputJoint(),this.inputNode.active=!1,n.destroy();break}}for(t=0;t<this.currentPartInfo.length&&this.currentPartInfo[t].spriteName!=e;t++);for(;t<this.currentPartInfo.length-1;t++)this.currentPartInfo[t].SetValue(this.currentPartInfo[t+1]);this.currentPartInfo.pop()},l.GetCurrentJointIndex=function(){return this.nodeJoint.getComponent("DlJoints").GetcurrentJointindex()},a(n,null,[{key:"instance",get:function(){return n._instance}}]),n}(u),e(G,"_instance",null),J=n((x=M).prototype,"prefabbuttonlevel",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=n(x.prototype,"inputNode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=n(x.prototype,"prefabParticleNode",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=n(x.prototype,"inputScaleNode",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=n(x.prototype,"inputfallSpeedNode",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=n(x.prototype,"inputmoveSpeedNode",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=n(x.prototype,"inputPosxNode",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=n(x.prototype,"inputPosyNode",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=n(x.prototype,"nodeJoint",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=x))||w));l._RF.pop()}}}));

System.register("chunks:///_virtual/game-manager.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,n,a,i,r,S,T;return{setters:[function(t){e=t.defineProperty,n=t.inheritsLoose,a=t.assertThisInitialized,i=t.createClass},function(t){r=t.cclegacy,S=t._decorator,T=t.Component}],execute:function(){var o,s,c;t("GAME_STATE",void 0),r._RF.push({},"52d6f49x69OqYb0hHaqk4Om","game-manager",void 0);var u,E=S.ccclass;S.property;!function(t){t[t.STATE_LOADING=0]="STATE_LOADING",t[t.STATE_ACTION_PHASE=1]="STATE_ACTION_PHASE",t[t.STATE_SELECT_LEVEL=2]="STATE_SELECT_LEVEL",t[t.STATE_GAME_RESULT=3]="STATE_GAME_RESULT",t[t.STATE_IGM=4]="STATE_IGM",t[t.STATE_MM=5]="STATE_MM"}(u||(u=t("GAME_STATE",{})));t("default",E("GameManager")((c=s=function(t){function r(){for(var n,i=arguments.length,r=new Array(i),S=0;S<i;S++)r[S]=arguments[S];return n=t.call.apply(t,[this].concat(r))||this,e(a(n),"currentState",u.STATE_LOADING),e(a(n),"preState",u.STATE_LOADING),e(a(n),"timeInGame",0),e(a(n),"timeTotal",0),e(a(n),"nodeGameState",[]),n}n(r,t);var S=r.prototype;return S.onLoad=function(){r._instance=this.node.getComponent("GameManager"),this.nodeGameState=new Array(6),this.nodeGameState[u.STATE_LOADING]=this.node.getChildByName("loading"),this.nodeGameState[u.STATE_ACTION_PHASE]=this.node.getChildByName("ap"),this.nodeGameState[u.STATE_GAME_RESULT]=this.node.getChildByName("game-result"),this.nodeGameState[u.STATE_IGM]=this.node.getChildByName("igm"),this.nodeGameState[u.STATE_MM]=this.node.getChildByName("mm"),this.nodeGameState[u.STATE_SELECT_LEVEL]=this.node.getChildByName("select-level")},S.start=function(){this.ResetState(),this.timeInGame=0},S.update=function(t){this.currentState==u.STATE_ACTION_PHASE&&(this.timeInGame+=t),this.timeTotal+=t},S.ResetState=function(){this.preState=u.STATE_LOADING,this.currentState=u.STATE_LOADING,this.nodeGameState.forEach((function(t){t&&(t.active=!1)})),this.nodeGameState[this.currentState].active=!0},S.SwitchState=function(t){this.preState=this.currentState,this.currentState=t,this.nodeGameState.forEach((function(t){t&&(t.active=!1)})),this.nodeGameState[this.currentState].active=!0},S.GetCurrentState=function(){return this.currentState},S.GetPreState=function(){return this.preState},S.GetTimeInAP=function(){return this.timeInGame},S.GetCurrentTime=function(){return this.timeTotal},S.GetAPNode=function(){return this.nodeGameState[u.STATE_ACTION_PHASE]},S.GetResultNode=function(){return this.nodeGameState[u.STATE_GAME_RESULT]},S.ResetTimeInGame=function(){this.timeInGame=0},S.PauseGame=function(){this.SwitchState(u.STATE_IGM)},S.ResumeGame=function(){this.SwitchState(u.STATE_ACTION_PHASE)},i(r,null,[{key:"instance",get:function(){return r._instance}}]),r}(T),e(s,"_instance",null),o=c))||o);r._RF.pop()}}}));

System.register("chunks:///_virtual/dl-particle-node.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,r,n,o;return{setters:[function(t){e=t.inheritsLoose},function(t){r=t.cclegacy,n=t._decorator,o=t.Component}],execute:function(){var c;r._RF.push({},"5525aDjmTRMyqnl5gHXuMze","dl-particle-node",void 0);var i=n.ccclass;n.property,t("DlParticleNode",i("DlParticleNode")(c=function(t){function r(){return t.apply(this,arguments)||this}return e(r,t),r.prototype.start=function(){},r}(o))||c);r._RF.pop()}}}));

System.register("chunks:///_virtual/shape-manager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./game-manager.ts","./resource-manager.ts","./shape-level.ts","./particle.ts"],(function(t){"use strict";var e,n,i,r,a,s,o,h,c,l,u,d,p,f,P,v,m,S;return{setters:[function(t){e=t.defineProperty,n=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.assertThisInitialized,a=t.initializerDefineProperty,s=t.createClass},function(t){o=t.cclegacy,h=t._decorator,c=t.Vec3,l=t.Vec2,u=t.Node,d=t.Component},function(t){p=t.default,f=t.GAME_STATE},function(t){P=t.default},function(t){v=t.PartJoint,m=t.default},function(t){S=t.PARTICLE_MOVE_TYPE}],execute:function(){var L,g,I,N,y,x,C,G,T;o._RF.push({},"5fb2b0YCupP/ZaU/LPOf1MN","shape-manager",void 0);var J=h.ccclass,b=h.property,A=t("ShapeJointInfo",function(){function t(){e(this,"arrayJoint",[]),e(this,"arrayStatus",[]),e(this,"currentIndex",0)}var n=t.prototype;return n.Init=function(t){for(var e=0,n=0,i=0;n<t.partInfo.length;n++)e+=t.partInfo[n].partJoints.length;for(this.arrayJoint=new Array(e),this.arrayStatus=new Array(e),n=0;n<t.partInfo.length;n++)for(var r=t.partInfo[n].partJoints,a=0;a<r.length;a++)this.arrayStatus[i]=0,this.arrayJoint[i]=new v,this.arrayJoint[i].id=r[a].id,this.arrayJoint[i].x=r[a].x,this.arrayJoint[i].y=r[a].y,i++;this.currentIndex=0},n.UpdateStatus=function(t){for(var e=0;e<this.arrayStatus.length;e++)for(var n=0;n<t.length;n++)this.arrayJoint[e].id==t[n].id&&(this.arrayStatus[e]=1)},n.ResetStatus=function(){for(var t=0;t<this.arrayStatus.length;t++)this.arrayStatus[t]=0},n.GetCurrentJointPos=function(){return new c(this.arrayJoint[this.currentIndex].x,this.arrayJoint[this.currentIndex].y,0)},n.GetCurrentTargetSpriteName=function(){var t=this.arrayJoint[this.currentIndex].id.indexOf(";");return t>0?this.arrayJoint[this.currentIndex].id.substring(t):""},n.GetReadyJoint=function(){for(var t=0,e=0;e<this.arrayStatus.length;e++)1==this.arrayStatus[e]&&t++;var n=new Array(t);for(t=0,e=0;e<this.arrayStatus.length;e++)1==this.arrayStatus[e]&&(n[t++]=new l(this.arrayJoint[e].x,this.arrayJoint[e].y));return n},n.GoNextJoint=function(){for(var t=0;t<this.arrayStatus.length;t++)if(this.currentIndex!=t&&1==this.arrayStatus[t])return this.currentIndex=t,!0;return!1},t}());t("default",(L=J("ShapeManager"),g=b(cc.Node),I=b(cc.Prefab),L((T=G=function(t){function n(){for(var n,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return n=t.call.apply(t,[this].concat(s))||this,e(r(n),"currentLevelindex",0),e(r(n),"currentLevelInfo",null),e(r(n),"isLevelLoading",!1),a(r(n),"timePlayNode",x,r(n)),a(r(n),"prefabParticle",C,r(n)),e(r(n),"timeLevelRemaining",0),e(r(n),"timeLevelLabel",null),e(r(n),"inputController",null),e(r(n),"minMove",new l(120,120)),e(r(n),"shapeNode",null),e(r(n),"currentParticleNode",null),e(r(n),"shapeHintNode",null),e(r(n),"currentJoint",null),e(r(n),"currentIndexShape",0),e(r(n),"deltaPartPosX",0),e(r(n),"numberMatchedPart",0),e(r(n),"isWrongPart",!1),e(r(n),"textResult","FAILED"),n}i(n,t);var o=n.prototype;return o.onLoad=function(){n._instance=this.node.getComponent("ShapeManager")},o.start=function(){this.timePlayNode&&(this.timeLevelLabel=this.timePlayNode.getComponent("cc.Label")),this.inputController=this.node.parent.getComponent("InputController"),this.currentLevelindex>=m.instance.LEVELDATA.length&&(this.currentLevelindex=0),this.shapeNode=p.instance.GetAPNode().getChildByName("shape"),null==this.shapeNode&&(this.shapeNode=new u("shape"),p.instance.GetAPNode().addChild(this.shapeNode)),P.instance.LoadPrefabsFolder("Prefabs/ShapeTheCurves/Effects",!1),this.LoadLevel(this.currentLevelindex)},o.update=function(t){switch(p.instance.GetCurrentState()){case f.STATE_LOADING:if(this.isLevelLoading&&P.instance.isLoadFinished){this.isLevelLoading=!1,p.instance.SwitchState(f.STATE_ACTION_PHASE);var e=p.instance.GetAPNode().getChildByName("background-level").getComponentInChildren("cc.Sprite");e&&(e._spriteFrame=P.instance.GetSprites("bg")),this.shapeHintNode=cc.instantiate(P.instance.GetPrefabs("particle-hint")),this.shapeNode.addChild(this.shapeHintNode),this.shapeHintNode.setPosition(-9999,-9999,0)}break;case f.STATE_ACTION_PHASE:this.timeLevelLabel&&(this.timeLevelLabel.string=""+Math.round(this.timeLevelRemaining)),this.timeLevelRemaining=this.currentLevelInfo.timeLimited-p.instance.GetTimeInAP(),this.UpdateTouch(),this.UpdateGenerateShap();break;case f.STATE_GAME_RESULT:var n,i=null===(n=p.instance.GetResultNode().getChildByName("txt-result"))||void 0===n?void 0:n.getComponent("cc.RichText");if(i){var r=p.instance.GetCurrentTime();r-Math.round(r)>.25?i.string="<color=#00ff00>"+this.textResult+"</color>":i.string="<color=#ff0000>"+this.textResult+"</color>"}}},o.LoadLevel=function(t){p.instance.SwitchState(f.STATE_LOADING),this.shapeNode.removeAllChildren(),this.isLevelLoading=!0,this.currentParticleNode=null,this.currentIndexShape=0,this.textResult="FAILED",this.currentLevelInfo=m.instance.GetLevelInfos(this.currentLevelindex),P.instance.LoadSpritFolder("Textures/ShapeTheCurves/levels/"+this.currentLevelInfo.levelName,!0),this.timeLevelRemaining=this.currentLevelInfo.timeLimited,null==this.currentJoint&&(this.currentJoint=new A),this.currentJoint.Init(this.currentLevelInfo),this.numberMatchedPart=0},o.UpdateTouch=function(){var t=this.inputController.GetMoveVector();(Math.abs(t.x)>this.minMove.x||Math.abs(t.y)>this.minMove.y)&&(Math.abs(t.x)>Math.abs(t.y)?t.x>0?this.MoveParticle(S.MOVE_RIGHT):this.MoveParticle(S.MOVE_LEFT):t.y<0&&this.MoveParticle(S.MOVE_DOWN),this.inputController.SetTouchStartToMove())},o.MoveParticle=function(t){this.currentParticleNode&&this.currentParticleNode.getComponent("Particle").MoveParticle(t)},o.UpdateGenerateShap=function(){var t;if(this.isWrongPart||this.currentIndexShape>this.currentLevelInfo.partInfo.length||p.instance.GetTimeInAP()>this.currentLevelInfo.timeLimited)p.instance.SwitchState(f.STATE_GAME_RESULT),(null===(t=p.instance.GetResultNode().getChildByName("background"))||void 0===t?void 0:t.getComponentInChildren("cc.Sprite"))._spriteFrame=P.instance.GetSprites("bg"),0==this.isWrongPart&&(this.textResult="Congratulation!");else if(null==this.currentParticleNode){if(this.currentIndexShape>=this.currentLevelInfo.partInfo.length)return void this.currentIndexShape++;var e=this.currentLevelInfo.partInfo[this.currentIndexShape],n=cc.instantiate(this.prefabParticle),i=n.getComponent("Particle"),r=n.getComponentInChildren("cc.Sprite");r._spriteFrame=P.instance.GetSprites(e.spriteName);var a=new cc.Size(r._spriteFrame._rect.width,r._spriteFrame._rect.height);n.children[0].setContentSize(a),this.shapeNode.addChild(n),n.setScale(e.scale,e.scale,e.scale),n.setPosition(e.startPoint.x,e.startPoint.y,0),i.InitParticle(e,this.currentLevelInfo.minMoveX,this.currentLevelInfo.maxMoveX,a),this.currentIndexShape++,this.currentParticleNode=n,this.isWrongPart=!1,this.UpdateShapeJoint(),console.log("add shape "+this.currentIndexShape)}else{this.currentParticleNode.getComponent("Particle").IsFinishMove()&&(this.IsFirstPart()&&(this.deltaPartPosX=this.currentParticleNode.position.x-this.currentParticleNode.position.x),this.currentParticleNode=null)}},o.UpdateShapeJoint=function(){if(this.currentIndexShape<=1)this.shapeHintNode.setPosition(-9999,-9999,0);else{var t=this.currentLevelInfo.partInfo[this.currentIndexShape-1].partJoints;this.currentJoint.UpdateStatus(t),this.shapeHintNode.setPosition(this.currentJoint.GetCurrentJointPos())}},o.SwapShapeHint=function(){this.currentJoint.GoNextJoint()&&this.shapeHintNode.setPosition(this.currentJoint.GetCurrentJointPos())},o.DeleteShape=function(){if(this.currentParticleNode){var t=P.instance.GetPrefabs("particle-explosion");if(t){var e=cc.instantiate(t);this.shapeNode.addChild(e),e.setPosition(this.currentParticleNode.position)}this.currentParticleNode.removeFromParent(),this.currentParticleNode.getComponent("Particle").DeleteShape(),this.currentParticleNode=null}},o.RestartLevel=function(){this.shapeNode.removeAllChildren(),this.currentParticleNode=null,this.currentIndexShape=0,this.textResult="FAILED",p.instance.ResetTimeInGame(),p.instance.SwitchState(f.STATE_ACTION_PHASE),this.shapeHintNode=cc.instantiate(P.instance.GetPrefabs("particle-hint")),this.shapeNode.addChild(this.shapeHintNode),this.shapeHintNode.setPosition(-9999,-9999,0),this.numberMatchedPart=0,this.currentJoint.ResetStatus()},o.CheckMatchedParticle=function(t){this.currentJoint.GetCurrentTargetSpriteName()==t?(console.log("this shape is matched"),this.numberMatchedPart++):this.isWrongPart=!0},o.IsFirstPart=function(){return 1==this.currentIndexShape},o.GetDeltaPartPosX=function(){return this.deltaPartPosX},o.GetLimitedLinePosy=function(){return this.currentLevelInfo.limitedLinePosY},o.GetReadyJointPos=function(){return this.currentJoint.GetReadyJoint()},o.PauseGame=function(){p.instance.PauseGame()},o.ResumeGame=function(){p.instance.ResumeGame()},s(n,null,[{key:"instance",get:function(){return n._instance}}]),n}(d),e(G,"_instance",null),x=n((y=T).prototype,"timePlayNode",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=n(y.prototype,"prefabParticle",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=y))||N));o._RF.pop()}}}));

System.register("chunks:///_virtual/dl-select-level.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./resource-manager.ts","./dl-exportleveljs.ts"],(function(e){"use strict";var t,n,i,l,r,o,a,s,c,u,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,l=e.assertThisInitialized,r=e.defineProperty},function(e){o=e.cclegacy,a=e._decorator,s=e.Node,c=e.Component},function(e){u=e.default},function(e){p=e.default}],execute:function(){var d,f,v,h,S,b,L;o._RF.push({},"6a568bOA8hCuKAd7An5Ir57","dl-select-level",void 0);var y=a.ccclass,g=a.property;e("default",(d=y("DlSelectLevel"),f=g({type:cc.Prefab}),v=g(s),d((b=t((S=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,i(l(t),"prefabbuttonlevel",b,l(t)),i(l(t),"selectSpriteNode",L,l(t)),r(l(t),"isLoadSprite",!1),r(l(t),"levels",["bambi"]),t}n(t,e);var o=t.prototype;return o.start=function(){var e=this;this.levels.forEach((function(t){var n=cc.instantiate(e.prefabbuttonlevel);n.getComponent("ButtonLevel").InitButton(t,"DlSelectLevel"),n.name=t,e.node.addChild(n)}))},o.UpdateSelect=function(e){var t=this;console.log("DlSelectLevel update button: "+e),this.levels.forEach((function(n){var i;n!=e&&(null===(i=t.node.getChildByName(n))||void 0===i||i.getComponent("ButtonLevel").SetSelectedButton(!1))})),this.isLoadSprite=!0,u.instance.LoadSpritFolder("Textures/ShapeTheCurves/levels/"+e,!0),p.instance.SetLevelName(e)},o.update=function(e){this.isLoadSprite&&u.instance.isLoadFinished&&(this.isLoadSprite=!1,this.selectSpriteNode&&this.selectSpriteNode.getComponent("DlSelectSprite").Init())},t}(c)).prototype,"prefabbuttonlevel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(S.prototype,"selectSpriteNode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=S))||h));o._RF.pop()}}}));

System.register("chunks:///_virtual/dl-joints.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./shape-level.ts","./dl-particle-edit.ts"],(function(t){"use strict";var i,n,e,o,r,s,l,a,u,c,p;return{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.inheritsLoose,e=t.initializerDefineProperty,o=t.assertThisInitialized,r=t.defineProperty},function(t){s=t.cclegacy,l=t._decorator,a=t.Node,u=t.Component},function(t){c=t.PartJoint},function(t){p=t.default}],execute:function(){var h,d,J,f,m,g,v,b,y,N,C,x,B;s._RF.push({},"795feIHcX5Mip4Mxo7kH0Ga","dl-joints",void 0);var I=l.ccclass,w=l.property;t("DlJoints",(h=I("DlJoints"),d=w({type:cc.Prefab}),J=w(a),f=w(a),m=w(a),g=w(a),h((y=i((b=function(t){function i(){for(var i,n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return i=t.call.apply(t,[this].concat(s))||this,e(o(i),"prefabbuttonlevel",y,o(i)),e(o(i),"inputNode",N,o(i)),e(o(i),"inputJointposx",C,o(i)),e(o(i),"inputJointposy",x,o(i)),e(o(i),"inputJointtarget",B,o(i)),r(o(i),"listJoint",[]),r(o(i),"selectedJointName",""),r(o(i),"currentCount",1),i}n(i,t);var s=i.prototype;return s.start=function(){this.inputNode&&""==this.selectedJointName&&(this.inputNode.active=!1)},s.AddJoint=function(){this.selectedJointName="joint"+this.currentCount,this.currentCount++;var t=cc.instantiate(this.prefabbuttonlevel);t.getComponent("ButtonLevel").InitButton(this.selectedJointName,"DlJoints"),t.name=this.selectedJointName,this.node.addChild(t);var i=new c;i.x=0,i.y=0,i.id=p.instance.GetCurrentPartinfo().spriteName+";",this.listJoint.push(i),this.inputJointposx.getComponent("cc.EditBox").string=""+i.x,this.inputJointposy.getComponent("cc.EditBox").string=""+i.x,this.inputJointtarget.getComponent("cc.EditBox").string=i.id,p.instance.UpdateJointInfo(this.listJoint),this.inputNode.active=!0},s.UpdateSelect=function(t){this.selectedJointName=t,console.log("DlJoints update button: "+t);for(var i=0,n=1;n<this.node.children.length;n++){var e=this.node.children[n];e.name!=t?e.getComponent("ButtonLevel").SetSelectedButton(!1):i=n}var o=this.listJoint[i-1];this.inputJointposx.getComponent("cc.EditBox").string=""+o.x,this.inputJointposy.getComponent("cc.EditBox").string=""+o.x,this.inputJointtarget.getComponent("cc.EditBox").string=o.id,this.inputNode.active=!0},s.RemoveCurrent=function(){this.selectedJointName;for(var t=0,i=1;i<this.node.children.length;i++){var n=this.node.children[i];if(n.name==this.selectedJointName){this.selectedJointName="",this.inputNode.active=!1,n.destroy(),t=i-1;break}}for(i=t;i<this.listJoint.length-1;i++)this.listJoint[i].x=this.listJoint[i+1].x,this.listJoint[i].y=this.listJoint[i+1].y,this.listJoint[i].id=this.listJoint[i+1].id;this.listJoint.pop(),p.instance.UpdateJointInfo(this.listJoint)},s.HideInputJoint=function(){this.inputNode.active=!1},s.ShowJointInfo=function(){this.listJoint=p.instance.GetCurrentPartinfo().partJoints,this.selectedJointName="",this.inputNode.active=!1,this.currentCount=0;for(var t=this.node.children.length-1;t>=1;t--){var i=this.node.children[t];i.removeFromParent(),i.destroy()}for(var n=0;n<this.listJoint.length;n++){var e="joint"+this.currentCount,o=cc.instantiate(this.prefabbuttonlevel);o.getComponent("ButtonLevel").InitButton(e,"DlJoints"),o.name=e,this.currentCount++,this.node.addChild(o)}},s.UpdateJointInfo=function(t){this.listJoint=t},s.GetcurrentJointindex=function(){for(var t=0,i=1;i<this.node.children.length;i++){this.node.children[i].name==this.selectedJointName&&(t=i-1)}return t},i}(u)).prototype,"prefabbuttonlevel",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=i(b.prototype,"inputNode",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=i(b.prototype,"inputJointposx",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=i(b.prototype,"inputJointposy",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=i(b.prototype,"inputJointtarget",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=b))||v));s._RF.pop()}}}));

System.register("chunks:///_virtual/destroys-effect.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,o,n,s;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,n=t._decorator,s=t.Component}],execute:function(){var r;o._RF.push({},"83bbaRAPBpEVrvoEwq1t/Na","destroys-effect",void 0);var c=n.ccclass;n.property,t("DestroysEffect",c("DestroysEffect")(r=function(t){function o(){return t.apply(this,arguments)||this}return e(o,t),o.prototype.start=function(){var t=this;this.node.getComponent("cc.Animation").on("finished",(function(){console.log("---- animation effect destroyed "),t.node.destroy()}))},o}(s))||r);o._RF.pop()}}}));

System.register("chunks:///_virtual/editboxinputvalue.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./dl-particle-edit.ts","./dl-exportleveljs.ts"],(function(e){"use strict";var t,n,r,a,i,o,s,u;return{setters:[function(e){t=e.inheritsLoose,n=e.defineProperty,r=e.assertThisInitialized},function(e){a=e.cclegacy,i=e._decorator,o=e.Component},function(e){s=e.default},function(e){u=e.default}],execute:function(){var p;a._RF.push({},"89c80EZRdJI5oOfwtQFOUfy","editboxinputvalue",void 0);var l=i.ccclass;i.property,e("Editboxinputvalue",l("Editboxinputvalue")(p=function(e){function a(){for(var t,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,n(r(t),"editBox",void 0),t}t(a,e);var i=a.prototype;return i.start=function(){this.editBox=this.node.getComponentInChildren("cc.EditBox")},i.onTextChange=function(e,t){var n,r=this.editBox.string;if(""!=r)if("minmovex"==t)n=Number.parseFloat(r),u.instance.UpdateMinMove(n);else if("maxmovex"==t)n=Number.parseFloat(r),u.instance.UpdateMaxMove(n);else if("time"==t)n=Number.parseFloat(r),u.instance.UpdateTime(n);else if("linelimited"==t)n=Number.parseFloat(r),u.instance.UpdateLineLimited(n);else if("fallspeed"==t){n=Number.parseFloat(r);var a=s.instance.GetCurrentPartinfo();a.fallSpeed=n,s.instance.UpdateCurrentPartinfo(a)}else if("movespeed"==t){n=Number.parseFloat(r);var i=s.instance.GetCurrentPartinfo();i.moveSpeed=n,s.instance.UpdateCurrentPartinfo(i)}else if("scale"==t){n=Number.parseFloat(r);var o=s.instance.GetCurrentPartinfo();o.scale=n,s.instance.UpdateCurrentPartinfo(o)}else if("partposx"==t){n=Number.parseFloat(r);var p=s.instance.GetCurrentPartinfo();p.endPoint.x=n,s.instance.UpdateCurrentPartinfo(p)}else if("partposy"==t){n=Number.parseFloat(r);var l=s.instance.GetCurrentPartinfo();l.endPoint.y=n,s.instance.UpdateCurrentPartinfo(l)}else if("jointposx"==t){n=Number.parseFloat(r);var c=s.instance.GetCurrentPartinfo(),f=s.instance.GetCurrentJointIndex();c.partJoints[f].x=n,s.instance.UpdateCurrentPartinfo(c)}else if("jointposy"==t){n=Number.parseFloat(r);var d=s.instance.GetCurrentPartinfo(),v=s.instance.GetCurrentJointIndex();d.partJoints[v].y=n,s.instance.UpdateCurrentPartinfo(d)}else if("jointtarget"==t){var m=s.instance.GetCurrentPartinfo(),C=s.instance.GetCurrentJointIndex();m.partJoints[C].id=r,s.instance.UpdateCurrentPartinfo(m)}},a}(o))||p);a._RF.pop()}}}));

System.register("chunks:///_virtual/button-level.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,n,o,c,i,s,l;return{setters:[function(t){e=t.inheritsLoose,n=t.defineProperty,o=t.assertThisInitialized},function(t){c=t.cclegacy,i=t._decorator,s=t.EventHandler,l=t.Component}],execute:function(){var r;c._RF.push({},"8aafe1tCfZCd6rzvuA7sEte","button-level",void 0);var u=i.ccclass;i.property,t("ButtonLevel",u("ButtonLevel")(r=function(t){function c(){for(var e,c=arguments.length,i=new Array(c),s=0;s<c;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i))||this,n(o(e),"updateSelectClassName",""),n(o(e),"isButtonSelected",!1),e}e(c,t);var i=c.prototype;return i.start=function(){},i.InitButton=function(t,e){this.updateSelectClassName=e,this.node.getComponentInChildren("cc.Label").string=t;var n=this.node.getComponent("cc.Button"),o=new s;o.target=this.node,o.component="ButtonLevel",o.handler="OnClickButton",o.customEventData=t,n.clickEvents.push(o)},i.OnClickButton=function(t,e){if(0==this.isButtonSelected&&(console.log("click on button: "+e),this.isButtonSelected=!0,this.SetSelectedButton(!0),this.node.parent)){var n=this.node.parent.getComponent(this.updateSelectClassName);n&&n.UpdateSelect(e)}},i.SetSelectedButton=function(t){var e=this.node.getComponent("cc.Button");this.isButtonSelected=t,e.interactable=!t},c}(l))||r);c._RF.pop()}}}));

System.register("chunks:///_virtual/input-controller.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./game-manager.ts"],(function(t){"use strict";var o,i,e,n,h,s,c,u,r;return{setters:[function(t){o=t.inheritsLoose,i=t.defineProperty,e=t.assertThisInitialized},function(t){n=t.cclegacy,h=t._decorator,s=t.Vec2,c=t.Vec3,u=t.Component},function(t){r=t.default}],execute:function(){var a;n._RF.push({},"dfe8fhSsftEu5rjOUoMW3fv","input-controller",void 0);var T=h.ccclass;h.property,t("InputController",T("InputController")(a=function(t){function n(){for(var o,n=arguments.length,h=new Array(n),u=0;u<n;u++)h[u]=arguments[u];return o=t.call.apply(t,[this].concat(h))||this,i(e(o),"posTouchStart",new s),i(e(o),"posTouchMove",new s),i(e(o),"posTouchEnd",new s),i(e(o),"isTouchMove",!1),i(e(o),"isTouchEnd",!0),i(e(o),"isTouchStart",!1),i(e(o),"timeDoubleTap",.35),i(e(o),"touchSize",new cc.Size),i(e(o),"canvasSize",new cc.Size),i(e(o),"canvasAnchor",new s),i(e(o),"nodePosition",new c),i(e(o),"timePreTouchStart",0),i(e(o),"timeCurrentTouchStart",0),o}o(n,t);var h=n.prototype;return h.start=function(){var t=cc.find("Canvas");this.canvasSize=t.getContentSize(),this.canvasAnchor=t.getAnchorPoint(),this.touchSize=this.node.getContentSize(),this.touchSize.width*=this.node.getScale().x,this.touchSize.height*=this.node.getScale().y,"Canvas"==this.node.name?this.nodePosition=new c(0,0,0):this.nodePosition=this.node.getPosition(),console.log("node size: "+this.touchSize+" canvas size: "+this.canvasSize),this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this)},h.update=function(t){},h.SetTouchSize=function(t){this.touchSize=t},h.onTouchStart=function(t){var o=this.GetRealPosTouch(t.getLocation());this.IsOutTouchArea(o)||(this.timePreTouchStart=this.timeCurrentTouchStart,this.timeCurrentTouchStart=r.instance.GetCurrentTime(),this.isTouchStart=!0,this.isTouchEnd=!1,this.posTouchStart=o)},h.onTouchEnd=function(t){var o=this.GetRealPosTouch(t.getLocation());this.isTouchMove=!1,this.isTouchEnd=!0,this.isTouchStart=!1,this.IsOutTouchArea(o)||(this.posTouchEnd=o)},h.onTouchMove=function(t){var o=this.GetRealPosTouch(t.getLocation());this.IsOutTouchArea(o)?(this.isTouchEnd=!0,this.isTouchMove=!1):(this.posTouchMove=o,this.isTouchEnd=!1,this.isTouchMove=!0)},h.IsTouchEnd=function(){return this.isTouchEnd},h.IsTouchMove=function(){return this.isTouchMove},h.GetMoveVector=function(){var t=new s(0,0);return(this.isTouchMove||this.isTouchEnd)&&(t.x=this.posTouchMove.x-this.posTouchStart.x,t.y=this.posTouchMove.y-this.posTouchStart.y),t},h.IsOutTouchArea=function(t){return t.x<this.nodePosition.x-this.touchSize.width/2||t.x>this.nodePosition.x+this.touchSize.width/2||(t.y<this.nodePosition.y-this.touchSize.height/2||t.y>this.nodePosition.y+this.touchSize.height/2)},h.GetRealPosTouch=function(t){var o=new s(t.x,t.y);return.5==this.canvasAnchor.x&&(o.x-=this.canvasSize.width/2),.5==this.canvasAnchor.y&&(o.y-=this.canvasSize.height/2),o},h.IsDoubleTouch=function(){return this.timeCurrentTouchStart!=this.timePreTouchStart&&this.timeCurrentTouchStart-this.timePreTouchStart<this.timeDoubleTap},h.GetPosTouchStart=function(){return this.posTouchStart},h.GetPosTouchMove=function(){return this.posTouchMove},h.GetPosTouchEnd=function(){return this.posTouchEnd},h.SetTouchStartToMove=function(){this.posTouchStart=this.posTouchMove},h.SetNodePosition=function(t){this.nodePosition=t},n}(u))||a);n._RF.pop()}}}));

System.register("chunks:///_virtual/rotate-controller.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,a,s,i,o,r,n,c;return{setters:[function(t){e=t.inheritsLoose,a=t.defineProperty,s=t.assertThisInitialized},function(t){i=t.cclegacy,o=t._decorator,r=t.Vec3,n=t.Quat,c=t.Component}],execute:function(){var l;t("ROTATE_TYPE",void 0),i._RF.push({},"e3177sKDvRKe55pheeHXC3q","rotate-controller",void 0);var u,h=o.ccclass;o.property;!function(t){t.NONE="",t.x="x",t.xa="x'",t.y="y",t.ya="y'",t.U="U",t.Ua="U'",t.u="u",t.ua="u'",t.D="D",t.Da="D'",t.d="d",t.da="d'",t.R="R",t.Ra="R'",t.r="r",t.ra="r'",t.L="L",t.La="L'",t.l="l",t.la="l'",t.B="B",t.Ba="B'",t.b="b",t.ba="b'",t.F="F",t.Fa="F'",t.f="f",t.fa="f'",t.M="M",t.Ma="M'",t.E="E",t.Ea="E'",t.S="S",t.Sa="S'"}(u||(u=t("ROTATE_TYPE",{})));t("default",h("RotateController")(l=function(t){function i(){for(var e,i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];return e=t.call.apply(t,[this].concat(o))||this,a(s(e),"timeRotateStart",0),a(s(e),"isRotate",!1),a(s(e),"timeRotate",1),a(s(e),"rorateAxis",new r),a(s(e),"rotateAngle",90),a(s(e),"targetAngle",new r),a(s(e),"targetQuat",new n),e}e(i,t);var o=i.prototype;return o.start=function(){this.timeRotateStart=0},o.update=function(t){if(this.isRotate)if(this.timeRotateStart+=t,this.timeRotateStart>=this.timeRotate)this.isRotate=!1,this.node.setRotation(this.targetQuat);else{var e=new n;n.fromAxisAngle(e,this.rorateAxis,this.rotateAngle/this.timeRotate*t*(3.14159265/180));var a=new n,s=new n;this.node.getRotation(a),n.multiply(s,e,a),this.node.setRotation(s)}},o.DoRotate=function(t){if(this.isRotate)return!1;switch(t){case u.x:case u.Ma:case u.R:case u.r:case u.La:case u.la:this.rorateAxis=new r(-1,0,0);break;case u.xa:case u.M:case u.Ra:case u.ra:case u.L:case u.l:this.rorateAxis=new r(1,0,0);break;case u.y:case u.U:case u.u:case u.Da:case u.da:case u.Ea:this.rorateAxis=new r(0,-1,0);break;case u.ya:case u.Ua:case u.ua:case u.D:case u.d:case u.E:this.rorateAxis=new r(0,1,0);break;case u.F:case u.f:case u.Ba:this.rorateAxis=new r(0,0,-1);break;case u.Fa:case u.fa:case u.B:this.rorateAxis=new r(0,0,1)}this.isRotate=!0,this.timeRotateStart=0;var e=new n;n.fromAxisAngle(e,this.rorateAxis,this.rotateAngle*(3.14159265/180));var a=new n;return this.node.getRotation(a),n.multiply(this.targetQuat,e,a),!0},o.SetTimeRotate=function(t){this.timeRotate=t},o.RotateAround=function(t,e){var a=new n;n.fromAxisAngle(a,t,e*(3.14159265/180));var s=new n,i=new n;this.node.getRotation(s),n.multiply(i,a,s),this.node.setRotation(i)},o.IsRotating=function(){return this.isRotate},o.SetRotateAngle=function(t){this.rotateAngle=t},o.RotateToAngle=function(t,e){if(0!=t){var a=new n,s=new n;n.fromAxisAngle(a,e,t*(3.14159265/180));var i=new n;this.node.getRotation(i),n.multiply(s,a,i),this.node.setRotation(s)}},i}(c))||l);i._RF.pop()}}}));

System.register("chunks:///_virtual/shape-the-curves.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./shape-manager.ts"],(function(e){"use strict";var t,n,u,o,r;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,u=e._decorator,o=e.Component},function(e){r=e.default}],execute:function(){var s;n._RF.push({},"ea30fU/pw9HKL/8gK8/n95m","shape-the-curves",void 0);var c=u.ccclass;u.property,e("ShapeTheCurves",c("ShapeTheCurves")(s=function(e){function n(){return e.apply(this,arguments)||this}t(n,e);var u=n.prototype;return u.start=function(){},u.update=function(e){},u.OnButtonPause=function(){},u.OnButtonRefresh=function(){r.instance.RotateShape()},u.OnButtonDelete=function(){r.instance.DeleteShape()},n}(o))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/dl-select-sprite.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./resource-manager.ts","./dl-particle-edit.ts"],(function(e){"use strict";var t,n,i,r,o,l,a,c,s,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized,o=e.defineProperty},function(e){l=e.cclegacy,a=e._decorator,c=e.Component},function(e){s=e.default},function(e){u=e.default}],execute:function(){var p,d,f,v,h;l._RF.push({},"eb72fG8eR5GZ7D9fcWmncTL","dl-select-sprite",void 0);var m=a.ccclass,b=a.property;e("DlSelectSprite",(p=m("DlSelectSprite"),d=b({type:cc.Prefab}),p((h=t((v=function(e){function t(){for(var t,n=arguments.length,l=new Array(n),a=0;a<n;a++)l[a]=arguments[a];return t=e.call.apply(e,[this].concat(l))||this,i(r(t),"prefabbuttonlevel",h,r(t)),o(r(t),"spritesName",[]),t}n(t,e);var l=t.prototype;return l.start=function(){},l.Init=function(){var e,t=this;this.spritesName=s.instance.GetArraySpriteName(),(null===(e=this.node.getChildByName("Label"))||void 0===e?void 0:e.getComponent("cc.Label")).string="select sprite",this.spritesName.forEach((function(e){var n=cc.instantiate(t.prefabbuttonlevel);n.getComponent("ButtonLevel").InitButton(e,"DlSelectSprite"),n.name=e,t.node.addChild(n)}))},l.UpdateSelect=function(e){var t=this;console.log("DlSelectSprite update button: "+e),this.spritesName.forEach((function(e){var n;null===(n=t.node.getChildByName(e))||void 0===n||n.getComponent("ButtonLevel").SetSelectedButton(!1)})),u.instance.AddParticle(e)},t}(c)).prototype,"prefabbuttonlevel",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=v))||f));l._RF.pop()}}}));

System.register("chunks:///_virtual/resource-manager.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var r,a,t,n;return{setters:[function(e){r=e.defineProperty,a=e.createClass},function(e){t=e.cclegacy,n=e._decorator}],execute:function(){var i,c,s;t._RF.push({},"fcbc7FzB7lP7qagSkx/4Tua","resource-manager",void 0);var o=n.ccclass;n.property,e("default",o("Typescript")((s=c=function(){function e(){r(this,"isLoadFinished",!1),r(this,"arraySprite",{}),r(this,"arrayPrefab",{})}var t=e.prototype;return t.ReleaseSprite=function(e){for(var r in e)cc.log("----release Sprite: "+r),cc.assetManager.releaseAsset(e[r])},t.LoadSpritFolder=function(e,r){var a=this;this.isLoadFinished=!1,r&&this.ReleaseSprite(this.arraySprite),cc.resources.loadDir(e,(function(r,t){cc.log("-------------LoadSpritFolder: "+e),t&&t.forEach((function(e){e instanceof cc.SpriteFrame&&(cc.log("-------------LoadSpritFolder: "+e._name),a.arraySprite[e._name.toLowerCase()]=e)})),a.isLoadFinished=!0}))},t.LoadPrefabsFolder=function(e,r){var a=this;r&&this.ReleaseSprite(this.arrayPrefab),cc.resources.loadDir(e,(function(e,r){r&&r.forEach((function(e){cc.log("-------------load Prefabs: "+e.data._name),e instanceof cc.Prefab&&(a.arrayPrefab[e.data._name.toLowerCase()]=e)}))}))},t.GetSprites=function(e){return this.arraySprite[e]},t.GetPrefabs=function(e){return this.arrayPrefab[e]},t.GetArraySpriteName=function(){var e=[];for(var r in this.arraySprite)e.push(r);return e},a(e,null,[{key:"instance",get:function(){return null==e._instance&&(e._instance=new e),e._instance}}]),e}(),r(c,"_instance",null),i=s))||i);t._RF.pop()}}}));

System.register("chunks:///_virtual/shape-level.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,i,n,s;return{setters:[function(t){e=t.defineProperty,i=t.createClass},function(t){n=t.cclegacy,s=t._decorator}],execute:function(){n._RF.push({},"fd229aCcO5HnqzebpWeVfJ3","shape-level",void 0);s.ccclass,s.property;var o=t("PartPoint",(function(){e(this,"x",0),e(this,"y",0)})),a=t("PartJoint",(function(){e(this,"x",0),e(this,"y",0),e(this,"id","")})),r=(t("PartInfo",function(){function t(){e(this,"spriteName",""),e(this,"scale",0),e(this,"fallSpeed",0),e(this,"moveSpeed",0),e(this,"startPoint",void 0),e(this,"endPoint",void 0),e(this,"partJoints",[])}var i=t.prototype;return i.Clone=function(){var e=new t;e.spriteName=this.spriteName,e.scale=this.scale,e.fallSpeed=this.fallSpeed,e.moveSpeed=this.moveSpeed,e.startPoint=new o,e.startPoint.x=this.startPoint.x,e.startPoint.y=this.startPoint.y,e.endPoint=new o,e.endPoint.x=this.endPoint.x,e.endPoint.y=this.endPoint.y,e.partJoints=[];for(var i=0;i<this.partJoints.length;i++){var n=new a;n.x=this.partJoints[i].x,n.y=this.partJoints[i].y,n.id=this.partJoints[i].id,e.partJoints.push(n)}return e},i.SetValue=function(t){this.spriteName=t.spriteName,this.scale=t.scale,this.fallSpeed=t.fallSpeed,this.moveSpeed=t.moveSpeed,this.startPoint.x=t.startPoint.x,this.startPoint.y=t.startPoint.y,this.endPoint.x=t.endPoint.x,this.endPoint.y=t.endPoint.y,this.partJoints=[];for(var e=0;e<t.partJoints.length;e++){var i=new a;i.x=t.partJoints[e].x,i.y=t.partJoints[e].y,i.id=t.partJoints[e].id,this.partJoints.push(i)}},t}()),t("ShapeLevelInfo",(function(){e(this,"levelName",""),e(this,"timeLimited",0),e(this,"targetMacthedParticle",0),e(this,"minMoveX",0),e(this,"maxMoveX",0),e(this,"limitedLinePosY",0),e(this,"partInfo",[])})),t("default",function(){function t(){e(this,"LEVEL1",{levelName:"bambi",timeLimited:50,targetMacthedParticle:3,minMoveX:40,maxMoveX:50,limitedLinePosY:-300,partInfo:[]}),e(this,"LEVELDATA",[this.LEVEL1])}return t.prototype.GetLevelInfos=function(t){var e=cc.sys.localStorage.getItem("SHAPETHECURVES_CURRENT_LEVEL");return e&&e.length>0?JSON.parse(e):((t<0||t>=this.LEVELDATA.length)&&(t=0),this.LEVELDATA[t])},i(t,null,[{key:"instance",get:function(){return null==t._instance&&(t._instance=new t),t._instance}}]),t}()));e(r,"_instance",null),n._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./game-manager.ts","./resource-manager.ts","./shape-level.ts","./shape-manager.ts","./particle.ts","./dl-particle-edit.ts","./dl-exportleveljs.ts","./dl-particle-node.ts","./dl-select-level.ts","./dl-joints.ts","./destroys-effect.ts","./editboxinputvalue.ts","./button-level.ts","./input-controller.ts","./rotate-controller.ts","./shape-the-curves.ts","./dl-select-sprite.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});